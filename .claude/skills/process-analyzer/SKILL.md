---
name: process-analyzer
description: 議事録・メモ・業務シナリオテキストから業務プロセス要件定義書を生成する
user_invocable: true
---

# Process Analyzer Skill

非構造テキスト（議事録、メモ、業務シナリオ説明等）を入力とし、スイムレーンチャート生成に必要な業務プロセス要件定義書（requirements.md）を作成します。

## 使い方

```
/process-analyzer [--run-id <uuid>]
```

実行後、テキストの入力を求めます。ユーザーはテキストを貼り付けるか、ファイルパスを指定します。

## 処理手順

### 1. テキストの取得

ユーザーから非構造テキストを受け取る。ファイルパスが指定された場合は Read ツールで読み込む。

### 2. process-analyst Agent によるプロセス抽出

Task ツールで `process-analyst` agent を呼び出し、テキストからプロセス要素を抽出する。

### 3. 不明点の質問ループ

抽出結果から不明点を特定し、AskUserQuestion ツールで質問する。

**終了条件**（いずれかを満たしたら終了）:
- 2ラウンド完了（1ラウンド = 1回の質問セット提示）
- 累計15問に到達
- 全疑問が解消された

**質問の優先順位**:
1. スイムレーンの特定に必要な部門情報
2. 判断ポイントの分岐条件
3. 使用システム・ツール
4. 工程フェーズの時間軸
5. 例外パス・エラーハンドリング

参考: `references/question_patterns.md`

### 4. 未確認事項の記録

質問ループ打ち切り時に未解決の疑問がある場合:
- `(Assumption)` タグ付きで「前提・未確認事項」セクションに記録
- 合理的な前提を仮設定する

### 5. requirements.md の生成

以下のフォーマットで `output/{run_id}/requirements.md` を生成する。

チェックリスト `references/process_analysis_checklist.md` を使って網羅性を確認してから出力する。

## 出力フォーマット

```markdown
# 業務プロセス要件定義書: [プロセス名]

## 概要
- **プロセス名**: ...
- **目的**: ...
- **頻度**: ...
- **トリガー**: ...

## 関連部門・役職（スイムレーン候補）
1. [部門A] - [役割説明]
2. [部門B] - [役割説明]

## プロセスステップ

### Step 1: [ステップ名]
- **担当部門**: ...
- **工程フェーズ**: ... (columns候補)
- **処理内容**: ...
- **使用システム**: ...
- **入力**: ... / **出力**: ...

### Step 2: [ステップ名]
- **担当部門**: ...
- **工程フェーズ**: ...
- **処理内容**: ...
- **使用システム**: ...
- **入力**: ... / **出力**: ...
- **判断ポイント**: [条件] → Yes: [Step X] / No: [Step Y]

## 判断ロジック一覧

| ID | 判断名 | 担当 | 条件 | Yes先 | No先 |
|---|---|---|---|---|---|
| D1 | ... | ... | ... | ... | ... |

## 例外・エラーパス
1. [パス名]: [条件] → [処理フロー]

## 前提・未確認事項
- (Assumption) [未確認の前提事項]
- (Assumption) [未確認の前提事項]

## ヒアリングで確認済みの事項
- [Q]: [質問内容] → [A]: [回答内容]
```

## 出力

- `output/{run_id}/requirements.md`

## 参考資料

- `references/process_analysis_checklist.md` - 分析チェックリスト
- `references/question_patterns.md` - 質問パターン集
